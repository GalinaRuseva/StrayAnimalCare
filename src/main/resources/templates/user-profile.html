<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/commons::head"></head>
<body style="background-image: url('/img/background-1.jpg'); background-size: cover; background-repeat: no-repeat;">
<header th:replace="fragments/commons::nav"></header>
<main>
  <div class="welcome mt-1 mb-4" style="width: 90%; margin: 0 auto;">
    <p class="mySticky bg-gray text-dark user" th:text="${user.firstName != null ? user.firstName + ' ' + user.lastName + ' Profile' : user.username + ' Profile'}"></p>
    <div class="mt-1 mb-2" style="text-align: left;">
      <form th:action="@{'/users/' + ${user.id} + '/profile'}" th:object="${userEditRequest}" th:method="PUT">
        <div class="form-group">
          <label for="firstName">First Name:</label>
          <input type="text" id="firstName" name="firstName" th:field="*{firstName}" class="form-control" />
        </div>
        <div class="form-group">
          <label for="lastName">Last Name:</label>
          <input type="text" id="lastName" name="lastName" th:field="*{lastName}" class="form-control" />
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" th:field="*{email}" class="form-control" />
        </div>
        <div class="form-group">
          <label for="phoneNumber">Phone Number:</label>
          <input type="tel" id="phoneNumber" name="phoneNumber" th:field="*{phoneNumber}" class="form-control" />
        </div>
        <div class="form-group">
          <label for="country">Country:</label>
          <input type="text" id="country" name="country" th:field="*{country}" class="form-control" />
        </div>
        <div class="form-group">
          <label for="city">City:</label>
          <input type="text" id="city" name="city" th:field="*{city}" class="form-control" />
        </div>
        <div class="form-group">
          <label for="neighborhood">Neighborhood:</label>
          <input type="text" id="neighborhood" name="neighborhood" th:field="*{neighborhood}" class="form-control" />
        </div>
        <button type="submit" class="btn btn-primary">Edit Profile</button>
      </form>
    </div>
  </div>

  <div class="welcome mt-1 mb-4" style="width: 90%; margin: 0 auto;">
    <div class="mt-1 mb-2">
      <div class="home-fields" style="height: 58vh; overflow: auto; width: 49%; float: left; margin-right: 1%;">
        <h3 class="all-animals">Followed Animals</h3>
        <table class="table table-striped table-bordered">
          <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Information</th>
            <th>Added on</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="animal : ${user.followedAnimals}">
            <td th:text="${#strings.capitalize(#strings.toLowerCase(animal.name))}"></td>
            <td th:text="${#strings.capitalize(#strings.toLowerCase(animal.type.name()))}"></td>
            <td th:text="${#strings.capitalize(#strings.toLowerCase(animal.information))}"></td>
            <td th:text="${#temporals.format(animal.createdOn, 'yyyy-MM-dd HH:mm')}"></td>
            <td>
              <form th:action="@{'/animals/followed/' + ${animal.id}}" th:method="DELETE">
                <button class="btn-danger btn">Unfollow</button>
              </form>
              <a th:href="@{'/animals/' + ${animal.id} + '/profile'}">Profile</a>
              <!--                                        <button class="btn-info btn">Go to Profile</button>-->
            </td>

          </tr>
          </tbody>
        </table>

<!--        <ul class="list-group list-group-vertical text-dark">-->
<!--          <li th:each="animal : ${user.followedAnimals}">-->
<!--            <div class="my-paintings-first-row">-->
<!--              <a th:href="@{'/animals/' + ${animal.id} + '/profile'}" th:text="${animal.name}"></a>-->
<!--              <p th:text="'Type: ' + ${animal.type}"></p>-->
<!--            </div>-->
<!--          </li>-->
<!--        </ul>-->
      </div>

      <div class="home-fields" style="height: 58vh; overflow: auto; width: 49%; float: left;">
        <h3 class="all-animals">My Actions</h3>
        <ul class="list-group list-group-vertical text-dark">

          <table class="table table-striped table-bordered">
            <thead>
            <tr>
              <th>Animal</th>
              <th>Type</th>
              <th>Description</th>
              <th>Added on</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="action : ${user.actions}">
              <td th:text="${#strings.capitalize(#strings.toLowerCase(action.animal.name))}"></td>
              <td th:text="${#strings.capitalize(#strings.toLowerCase(action.type.name()))}"></td>
              <td th:text="${#strings.capitalize(#strings.toLowerCase(action.description))}"></td>
              <td th:text="${#temporals.format(action.createdOn, 'yyyy-MM-dd HH:mm')}"></td>
              <td>
                <a th:href="@{'/actions/' + ${action.id}}">Go to action</a>
                <!--                                        <button class="btn-info btn">Go to Profile</button>-->
              </td>

<!--          <li th:each="action : ${user.actions}">-->
<!--            <div class="my-paintings-first-row">-->
<!--              <p th:text="${action.description}"></p>-->
<!--              <p th:text="'Type: ' + ${#strings.capitalize(#strings.toLowerCase(action.type.name()))}"></p>-->
<!--              <p th:text="'Date: ' + ${#temporals.format(action.createdOn, 'yyyy-MM-dd HH:mm')}"></p>-->
<!--            </div>-->
<!--          </li>-->
        </ul>
      </div>
      <div style="clear: both;"></div>
    </div>
  </div>
</main>
<footer th:replace="fragments/commons::footer"></footer>
</body>
</html>